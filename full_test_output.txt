
> antigravity-directory@0.1.0 test /Users/surajsatyarthi/Desktop/antigravity-directory
> vitest --run


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/Users/surajsatyarthi/Desktop/antigravity-directory[39m

[90mstdout[2m | tests/api/checkout-razorpay-create.test.ts
[22m[39m[dotenv@17.2.3] injecting env (15) from .env.test -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | tests/api/checkout-paypal-capture.test.ts
[22m[39m[dotenv@17.2.3] injecting env (15) from .env.test -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com

[90mstderr[2m | tests/api/checkout-razorpay-create.test.ts[2m > [22m[2mPOST /api/payments/razorpay/create[2m > [22m[2mHappy Path[2m > [22m[2mshould return 200 and order details for valid request
[22m[39mRazorpay API route error: TypeError: Cannot read properties of undefined (reading 'get')
    at checkRateLimit [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/lib/ratelimit.ts:30:30[90m)[39m
    at Module.POST [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/app/api/checkout/razorpay/create-order/route.ts:21:35[90m)[39m
    at [90m/Users/surajsatyarthi/Desktop/antigravity-directory/[39mtests/api/checkout-razorpay-create.test.ts:52:30
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m

[90mstderr[2m | tests/api/checkout-razorpay-create.test.ts[2m > [22m[2mPOST /api/payments/razorpay/create[2m > [22m[2mValidation Checks[2m > [22m[2mshould return 400 for invalid amount
[22m[39mRazorpay API route error: TypeError: Cannot read properties of undefined (reading 'get')
    at checkRateLimit [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/lib/ratelimit.ts:30:30[90m)[39m
    at Module.POST [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/app/api/checkout/razorpay/create-order/route.ts:21:35[90m)[39m
    at [90m/Users/surajsatyarthi/Desktop/antigravity-directory/[39mtests/api/checkout-razorpay-create.test.ts:77:30
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m

[90mstderr[2m | tests/api/checkout-razorpay-create.test.ts[2m > [22m[2mPOST /api/payments/razorpay/create[2m > [22m[2mValidation Checks[2m > [22m[2mshould return 400 for unsupported currency
[22m[39mRazorpay API route error: TypeError: Cannot read properties of undefined (reading 'get')
    at checkRateLimit [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/lib/ratelimit.ts:30:30[90m)[39m
    at Module.POST [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/app/api/checkout/razorpay/create-order/route.ts:21:35[90m)[39m
    at [90m/Users/surajsatyarthi/Desktop/antigravity-directory/[39mtests/api/checkout-razorpay-create.test.ts:91:30
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m

[90mstderr[2m | tests/api/checkout-razorpay-create.test.ts[2m > [22m[2mPOST /api/payments/razorpay/create[2m > [22m[2mValidation Checks[2m > [22m[2mshould return 400 when resourceId is missing
[22m[39mRazorpay API route error: TypeError: Cannot read properties of undefined (reading 'get')
    at checkRateLimit [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/lib/ratelimit.ts:30:30[90m)[39m
    at Module.POST [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/app/api/checkout/razorpay/create-order/route.ts:21:35[90m)[39m
    at [90m/Users/surajsatyarthi/Desktop/antigravity-directory/[39mtests/api/checkout-razorpay-create.test.ts:104:30
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m

[90mstderr[2m | tests/api/checkout-razorpay-create.test.ts[2m > [22m[2mPOST /api/payments/razorpay/create[2m > [22m[2mResilience[2m > [22m[2mshould handle Razorpay API errors with 500 status
[22m[39mRazorpay API route error: TypeError: Cannot read properties of undefined (reading 'get')
    at checkRateLimit [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/lib/ratelimit.ts:30:30[90m)[39m
    at Module.POST [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/app/api/checkout/razorpay/create-order/route.ts:21:35[90m)[39m
    at [90m/Users/surajsatyarthi/Desktop/antigravity-directory/[39mtests/api/checkout-razorpay-create.test.ts:125:30
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m

 [31mâ¯[39m tests/api/checkout-razorpay-create.test.ts [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 320[2mms[22m[39m
[31m       [31mÃ—[31m should return 200 and order details for valid request[39m[32m 291[2mms[22m[39m
[31m       [31mÃ—[31m should return 400 for invalid amount[39m[32m 7[2mms[22m[39m
[31m       [31mÃ—[31m should return 400 for unsupported currency[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should return 400 when resourceId is missing[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should handle Razorpay API errors with 500 status[39m[32m 11[2mms[22m[39m
[90mstderr[2m | tests/api/checkout-paypal-capture.test.ts[2m > [22m[2mPOST /api/payments/paypal/capture[2m > [22m[2mHappy Path[2m > [22m[2mshould successfully capture payment and update status
[22m[39mCapture API error: TypeError: Cannot read properties of undefined (reading 'get')
    at checkRateLimit [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/lib/ratelimit.ts:30:30[90m)[39m
    at Module.POST [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/app/api/checkout/capture-payment/route.ts:24:35[90m)[39m
    at [90m/Users/surajsatyarthi/Desktop/antigravity-directory/[39mtests/api/checkout-paypal-capture.test.ts:110:30
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m

[90mstderr[2m | tests/api/checkout-paypal-capture.test.ts[2m > [22m[2mPOST /api/payments/paypal/capture[2m > [22m[2mHappy Path[2m > [22m[2mshould update the resource to featured = true upon success
[22m[39mCapture API error: TypeError: Cannot read properties of undefined (reading 'get')
    at checkRateLimit [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/lib/ratelimit.ts:30:30[90m)[39m
    at Module.POST [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/app/api/checkout/capture-payment/route.ts:24:35[90m)[39m
    at [90m/Users/surajsatyarthi/Desktop/antigravity-directory/[39mtests/api/checkout-paypal-capture.test.ts:134:13
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m

[90mstderr[2m | tests/api/checkout-paypal-capture.test.ts[2m > [22m[2mPOST /api/payments/paypal/capture[2m > [22m[2mSafety Checks[2m > [22m[2mshould return 400 if payment is already SUCCEEDED
[22m[39mCapture API error: TypeError: Cannot read properties of undefined (reading 'get')
    at checkRateLimit [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/lib/ratelimit.ts:30:30[90m)[39m
    at Module.POST [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/app/api/checkout/capture-payment/route.ts:24:35[90m)[39m
    at [90m/Users/surajsatyarthi/Desktop/antigravity-directory/[39mtests/api/checkout-paypal-capture.test.ts:155:30
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m

[90mstderr[2m | tests/api/checkout-paypal-capture.test.ts[2m > [22m[2mPOST /api/payments/paypal/capture[2m > [22m[2mSafety Checks[2m > [22m[2mshould return 400 for missing orderId
[22m[39mCapture API error: TypeError: Cannot read properties of undefined (reading 'get')
    at checkRateLimit [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/lib/ratelimit.ts:30:30[90m)[39m
    at Module.POST [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/app/api/checkout/capture-payment/route.ts:24:35[90m)[39m
    at [90m/Users/surajsatyarthi/Desktop/antigravity-directory/[39mtests/api/checkout-paypal-capture.test.ts:168:30
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m

[90mstderr[2m | tests/api/checkout-paypal-capture.test.ts[2m > [22m[2mPOST /api/payments/paypal/capture[2m > [22m[2mPayment Failures[2m > [22m[2mshould handle declined payments gracefully
[22m[39mCapture API error: TypeError: Cannot read properties of undefined (reading 'get')
    at checkRateLimit [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/lib/ratelimit.ts:30:30[90m)[39m
    at Module.POST [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/app/api/checkout/capture-payment/route.ts:24:35[90m)[39m
    at [90m/Users/surajsatyarthi/Desktop/antigravity-directory/[39mtests/api/checkout-paypal-capture.test.ts:185:30
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m

[90mstderr[2m | tests/api/checkout-paypal-capture.test.ts[2m > [22m[2mPOST /api/payments/paypal/capture[2m > [22m[2mPayment Failures[2m > [22m[2mshould handle general PayPal API failures with 500
[22m[39mCapture API error: TypeError: Cannot read properties of undefined (reading 'get')
    at checkRateLimit [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/lib/ratelimit.ts:30:30[90m)[39m
    at Module.POST [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/app/api/checkout/capture-payment/route.ts:24:35[90m)[39m
    at [90m/Users/surajsatyarthi/Desktop/antigravity-directory/[39mtests/api/checkout-paypal-capture.test.ts:205:30
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m

 [31mâ¯[39m tests/api/checkout-paypal-capture.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 126[2mms[22m[39m
[31m       [31mÃ—[31m should successfully capture payment and update status[39m[32m 59[2mms[22m[39m
[31m       [31mÃ—[31m should update the resource to featured = true upon success[39m[32m 24[2mms[22m[39m
[31m       [31mÃ—[31m should return 400 if payment is already SUCCEEDED[39m[32m 17[2mms[22m[39m
[31m       [31mÃ—[31m should return 400 for missing orderId[39m[32m 5[2mms[22m[39m
[31m       [31mÃ—[31m should handle declined payments gracefully[39m[32m 8[2mms[22m[39m
       [32mâœ“[39m should handle general PayPal API failures with 500[32m 10[2mms[22m[39m
[90mstdout[2m | tests/api/checkout-razorpay-verify.test.ts
[22m[39m[dotenv@17.2.3] injecting env (15) from .env.test -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | tests/integration/components/SubmitForm.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (15) from .env.test -- tip: ðŸ”„ add secrets lifecycle management: https://dotenvx.com/ops

[90mstdout[2m | src/components/tools/__tests__/ToolsShell.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (15) from .env.test -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops

[90mstderr[2m | tests/api/checkout-razorpay-verify.test.ts[2m > [22m[2mPOST /api/payments/razorpay/webhook[2m > [22m[2mHappy Path[2m > [22m[2mshould verify valid signature and update database
[22m[39mRazorpay verification error: TypeError: Cannot read properties of undefined (reading 'get')
    at checkRateLimit [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/lib/ratelimit.ts:30:30[90m)[39m
    at Module.POST [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/app/api/checkout/razorpay/verify/route.ts:21:35[90m)[39m
    at [90m/Users/surajsatyarthi/Desktop/antigravity-directory/[39mtests/api/checkout-razorpay-verify.test.ts:83:30
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m

[90mstderr[2m | tests/api/checkout-razorpay-verify.test.ts[2m > [22m[2mPOST /api/payments/razorpay/webhook[2m > [22m[2mSecurity Checks[2m > [22m[2mshould reject invalid HMAC signature
[22m[39mRazorpay verification error: TypeError: Cannot read properties of undefined (reading 'get')
    at checkRateLimit [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/lib/ratelimit.ts:30:30[90m)[39m
    at Module.POST [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/app/api/checkout/razorpay/verify/route.ts:21:35[90m)[39m
    at [90m/Users/surajsatyarthi/Desktop/antigravity-directory/[39mtests/api/checkout-razorpay-verify.test.ts:105:30
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m

[90mstderr[2m | tests/api/checkout-razorpay-verify.test.ts[2m > [22m[2mPOST /api/payments/razorpay/webhook[2m > [22m[2mSecurity Checks[2m > [22m[2mshould return 400 for missing signature header
[22m[39mRazorpay verification error: TypeError: Cannot read properties of undefined (reading 'get')
    at checkRateLimit [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/lib/ratelimit.ts:30:30[90m)[39m
    at Module.POST [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/app/api/checkout/razorpay/verify/route.ts:21:35[90m)[39m
    at [90m/Users/surajsatyarthi/Desktop/antigravity-directory/[39mtests/api/checkout-razorpay-verify.test.ts:118:30
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m

[90mstderr[2m | tests/api/checkout-razorpay-verify.test.ts[2m > [22m[2mPOST /api/payments/razorpay/webhook[2m > [22m[2mReplay Prevention[2m > [22m[2mshould ignore webhook if payment is already processed
[22m[39mRazorpay verification error: TypeError: Cannot read properties of undefined (reading 'get')
    at checkRateLimit [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/lib/ratelimit.ts:30:30[90m)[39m
    at Module.POST [90m(/Users/surajsatyarthi/Desktop/antigravity-directory/[39msrc/app/api/checkout/razorpay/verify/route.ts:21:35[90m)[39m
    at [90m/Users/surajsatyarthi/Desktop/antigravity-directory/[39mtests/api/checkout-razorpay-verify.test.ts:143:30
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m

 [31mâ¯[39m tests/api/checkout-razorpay-verify.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 89[2mms[22m[39m
[31m       [31mÃ—[31m should verify valid signature and update database[39m[32m 52[2mms[22m[39m
[31m       [31mÃ—[31m should reject invalid HMAC signature[39m[32m 22[2mms[22m[39m
[31m       [31mÃ—[31m should return 400 for missing signature header[39m[32m 3[2mms[22m[39m
[31m       [31mÃ—[31m should ignore webhook if payment is already processed[39m[32m 4[2mms[22m[39m
 [31mâ¯[39m src/components/tools/__tests__/ToolsShell.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 12[2mms[22m[39m
[31m     [31mÃ—[31m renders children correctly[39m[32m 5[2mms[22m[39m
[31m     [31mÃ—[31m renders sidebar by default on desktop[39m[32m 1[2mms[22m[39m
[31m     [31mÃ—[31m toggles sidebar when toggle button is clicked[39m[32m 1[2mms[22m[39m
[31m     [31mÃ—[31m automatically closes sidebar on mobile[39m[32m 1[2mms[22m[39m
[90mstdout[2m | src/components/__tests__/InfiniteResourceGrid.test.tsx
[22m[39m[dotenv@17.2.3] injecting env (15) from .env.test -- tip: ðŸ”„ add secrets lifecycle management: https://dotenvx.com/ops

 [31mâ¯[39m src/components/__tests__/InfiniteResourceGrid.test.tsx [2m([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | tests/api/checkout-paypal-create.test.ts
[22m[39m[dotenv@17.2.3] injecting env (15) from .env.test -- tip: ðŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops

[90mstderr[2m | tests/api/checkout-paypal-create.test.ts[2m > [22m[2mPOST /api/payments/paypal/create[2m > [22m[2mNetwork Failure Handling[2m > [22m[2mshould handle PayPal API failures gracefully with 500 status
[22m[39mPayPal order creation error: Error: PayPal API timeout
    at [90m/Users/surajsatyarthi/Desktop/antigravity-directory/[39mtests/api/checkout-paypal-create.test.ts:227:9
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m
    at trace [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/test.B8ej_ZHS.js:239:21[90m)[39m
    at runTest [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:12[90m)[39m

[90mstderr[2m | tests/api/checkout-paypal-create.test.ts[2m > [22m[2mPOST /api/payments/paypal/create[2m > [22m[2mNetwork Failure Handling[2m > [22m[2mshould return user-friendly error message on PayPal failure
[22m[39mPayPal order creation error: Error: Network error
    at [90m/Users/surajsatyarthi/Desktop/antigravity-directory/[39mtests/api/checkout-paypal-create.test.ts:249:9
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m
    at trace [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/vitest@4.0.18_@opentelemetry+api@1.9.0_@types+node@20.19.31_@vitest+ui@4.0.18_jiti@2.6._135986a03d1ba316f08efd7a444f3da1/node_modules/[4mvitest[24m/dist/chunks/test.B8ej_ZHS.js:239:21[90m)[39m
    at runTest [90m(file:///Users/surajsatyarthi/Desktop/antigravity-directory/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@4.0.18/node_modules/[4m@vitest[24m/runner/dist/index.js:1653:12[90m)[39m

 [32mâœ“[39m tests/api/checkout-paypal-create.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 243[2mms[22m[39m
[90mstdout[2m | src/__tests__/scripts/weekly-scraper.test.ts
[22m[39m[dotenv@17.2.3] injecting env (15) from .env.test -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | src/__tests__/scripts/weekly-scraper.test.ts
[22m[39m[dotenv@17.2.3] injecting env (12) from .env.local -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`

 [32mâœ“[39m src/__tests__/scripts/weekly-scraper.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 168[2mms[22m[39m
[90mstdout[2m | src/__tests__/scripts/seed-50-tools.test.ts
[22m[39m[dotenv@17.2.3] injecting env (15) from .env.test -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com

[90mstdout[2m | src/__tests__/scripts/seed-50-tools.test.ts[2m > [22m[2mseed-50-tools[2m > [22m[2mseedTools[2m > [22m[2mshould complete seeding successfully
[22m[39mðŸ“¦ Preparing to seed 50 tools...

[90mstderr[2m | src/__tests__/scripts/seed-50-tools.test.ts[2m > [22m[2mseed-50-tools[2m > [22m[2mseedTools[2m > [22m[2mshould complete seeding successfully
[22m[39mâš ï¸ Skipping "Supabase": Category "database" not found
âš ï¸ Skipping "Neon": Category "database" not found
âš ï¸ Skipping "Pinecone": Category "database" not found
âš ï¸ Skipping "Weaviate": Category "database" not found
âš ï¸ Skipping "PlanetScale": Category "database" not found
âš ï¸ Skipping "Upstash": Category "database" not found
âš ï¸ Skipping "Chroma": Category "database" not found
âš ï¸ Skipping "Milvus": Category "database" not found
âš ï¸ Skipping "Qdrant": Category "database" not found
âš ï¸ Skipping "SurrealDB": Category "database" not found
âš ï¸ Skipping "ClickHouse": Category "analytics" not found
âš ï¸ Skipping "PostHog": Category "analytics" not found
âš ï¸ Skipping "June": Category "analytics" not found
âš ï¸ Skipping "Mixpanel": Category "analytics" not found
âš ï¸ Skipping "Amplitude": Category "analytics" not found
âš ï¸ Skipping "LogRocket": Category "analytics" not found
âš ï¸ Skipping "Segment": Category "analytics" not found
âš ï¸ Skipping "Heap": Category "analytics" not found
âš ï¸ Skipping "Umami": Category "analytics" not found
âš ï¸ Skipping "Plausible": Category "analytics" not found
âš ï¸ Skipping "Clerk": Category "auth" not found
âš ï¸ Skipping "Auth0": Category "auth" not found
âš ï¸ Skipping "BetterAuth": Category "auth" not found
âš ï¸ Skipping "Lucia": Category "auth" not found
âš ï¸ Skipping "NextAuth": Category "auth" not found
âš ï¸ Skipping "Logto": Category "auth" not found
âš ï¸ Skipping "Kinde": Category "auth" not found
âš ï¸ Skipping "SuperTokens": Category "auth" not found
âš ï¸ Skipping "Stytch": Category "auth" not found
âš ï¸ Skipping "FusionAuth": Category "auth" not found
âš ï¸ Skipping "OpenAI": Category "ai" not found
âš ï¸ Skipping "Anthropic": Category "ai" not found
âš ï¸ Skipping "Mistral": Category "ai" not found
âš ï¸ Skipping "Perplexity": Category "ai" not found
âš ï¸ Skipping "Together AI": Category "ai" not found
âš ï¸ Skipping "Anyscale": Category "ai" not found
âš ï¸ Skipping "Groq": Category "ai" not found
âš ï¸ Skipping "Cohere": Category "ai" not found
âš ï¸ Skipping "DeepSeek": Category "ai" not found
âš ï¸ Skipping "Firecrawl": Category "ai" not found
âš ï¸ Skipping "Tavily": Category "ai" not found
âš ï¸ Skipping "Exa": Category "ai" not found
âš ï¸ Skipping "Jina AI": Category "ai" not found
âš ï¸ Skipping "Voyage AI": Category "ai" not found
âš ï¸ Skipping "Deepgram": Category "ai" not found
âš ï¸ Skipping "ElevenLabs": Category "ai" not found
âš ï¸ Skipping "Leonardo AI": Category "ai" not found
âš ï¸ Skipping "Runway": Category "ai" not found
âš ï¸ Skipping "Pika": Category "ai" not found
âš ï¸ Skipping "Luma AI": Category "ai" not found

[90mstdout[2m | src/__tests__/scripts/seed-50-tools.test.ts[2m > [22m[2mseed-50-tools[2m > [22m[2mseedTools[2m > [22m[2mshould complete seeding successfully
[22m[39m
ðŸŽ‰ Successfully seeded 0 tools!

[90mstderr[2m | src/__tests__/scripts/seed-50-tools.test.ts[2m > [22m[2mseed-50-tools[2m > [22m[2mseedTools[2m > [22m[2mshould handle missing admin gracefully
[22m[39mâŒ Seeding failed (rolled back): No Admin ID found. Run user seed first.

 [32mâœ“[39m src/__tests__/scripts/seed-50-tools.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 50[2mms[22m[39m
[90mstdout[2m | src/__tests__/scripts/validate-data.test.ts
[22m[39m[dotenv@17.2.3] injecting env (15) from .env.test -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }

 [32mâœ“[39m src/__tests__/scripts/validate-data.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 41[2mms[22m[39m
[90mstdout[2m | tests/unit/lib/enrich-contacts.test.ts
[22m[39m[dotenv@17.2.3] injecting env (15) from .env.test -- tip: âš™ï¸  enable debug logging with { debug: true }

[90mstdout[2m | tests/unit/lib/payment.test.ts
[22m[39m[dotenv@17.2.3] injecting env (15) from .env.test -- tip: ðŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops

 [32mâœ“[39m tests/unit/lib/payment.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 96[2mms[22m[39m
 [31mâ¯[39m tests/integration/components/SubmitForm.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 6294[2mms[22m[39m
[31m       [31mÃ—[31m shows validation error when submitting without required fields[39m[33m 3283[2mms[22m[39m
       [33m[2mâœ“[22m[39m validates URL format [33m 914[2mms[22m[39m
       [32mâœ“[39m displays free categories correctly[32m 143[2mms[22m[39m
       [33m[2mâœ“[22m[39m updates button text based on category selection [33m 469[2mms[22m[39m
       [33m[2mâœ“[22m[39m opens checkout overlay on valid submission [33m 1118[2mms[22m[39m
       [33m[2mâœ“[22m[39m sanitizes script tags in input fields [33m 363[2mms[22m[39m
 [32mâœ“[39m tests/unit/lib/enrich-contacts.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 58[2mms[22m[39m
[90mstdout[2m | src/__tests__/scripts/import-mode.test.ts
[22m[39m[dotenv@17.2.3] injecting env (15) from .env.test -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild

[90mstdout[2m | src/__tests__/scripts/import-mode.test.ts
[22m[39m[dotenv@17.2.3] injecting env (12) from .env.local -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }

 [32mâœ“[39m src/__tests__/scripts/import-mode.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 62[2mms[22m[39m
[90mstdout[2m | tests/unit/lib/safeJsonLd.test.ts
[22m[39m[dotenv@17.2.3] injecting env (15) from .env.test -- tip: âš™ï¸  suppress all logs with { quiet: true }

 [32mâœ“[39m tests/unit/lib/safeJsonLd.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 61[2mms[22m[39m
[90mstdout[2m | tests/unit/schema.test.ts
[22m[39m[dotenv@17.2.3] injecting env (15) from .env.test -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`

[90mstdout[2m | tests/unit/profile-utils.test.ts
[22m[39m[dotenv@17.2.3] injecting env (15) from .env.test -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }

 [32mâœ“[39m tests/unit/profile-utils.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32mâœ“[39m tests/unit/schema.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 8[2mms[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Suites 1 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m src/components/__tests__/InfiniteResourceGrid.test.tsx[2m [ src/components/__tests__/InfiniteResourceGrid.test.tsx ][22m
[31m[1mReferenceError[22m: window is not defined[39m
[36m [2mâ¯[22m src/components/__tests__/InfiniteResourceGrid.test.tsx:[2m29:1[22m[39m
    [90m 27| [39m
    [90m 28| [39m[90m// @ts-ignore[39m
    [90m 29| [39mwindow[33m.[39m[33mIntersectionObserver[39m [33m=[39m mockIntersectionObserver[33m;[39m
    [90m   | [39m[31m^[39m
    [90m 30| [39m
    [90m 31| [39m[34mdescribe[39m([32m'InfiniteResourceGrid Zipper Logic'[39m[33m,[39m () [33m=>[39m {

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/20]âŽ¯[22m[39m


[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 19 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m tests/api/checkout-paypal-capture.test.ts[2m > [22mPOST /api/payments/paypal/capture[2m > [22mHappy Path[2m > [22mshould successfully capture payment and update status
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2mâ¯[22m tests/api/checkout-paypal-capture.test.ts:[2m113:31[22m[39m
    [90m111| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m112| [39m
    [90m113| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m114| [39m      [34mexpect[39m(data[33m.[39mstatus)[33m.[39m[34mtoBe[39m([32m'COMPLETED'[39m)[33m;[39m
    [90m115| [39m      [34mexpect[39m(data[33m.[39mtransactionId)[33m.[39m[34mtoBe[39m([32m'PAYPAL-TX-999'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/20]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/api/checkout-paypal-capture.test.ts[2m > [22mPOST /api/payments/paypal/capture[2m > [22mHappy Path[2m > [22mshould update the resource to featured = true upon success
[31m[1mAssertionError[22m: expected "vi.fn()" to be called 2 times, but got 0 times[39m
[36m [2mâ¯[22m tests/api/checkout-paypal-capture.test.ts:[2m137:25[22m[39m
    [90m135| [39m
    [90m136| [39m      // Verify db.update was called twice (once for payment, once forâ€¦
    [90m137| [39m      [34mexpect[39m(db[33m.[39mupdate)[33m.[39m[34mtoHaveBeenCalledTimes[39m([34m2[39m)[33m;[39m
    [90m   | [39m                        [31m^[39m
    [90m138| [39m    })[33m;[39m
    [90m139| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/20]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/api/checkout-paypal-capture.test.ts[2m > [22mPOST /api/payments/paypal/capture[2m > [22mSafety Checks[2m > [22mshould return 400 if payment is already SUCCEEDED
[31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 400[39m
[31m+ 500[39m

[36m [2mâ¯[22m tests/api/checkout-paypal-capture.test.ts:[2m158:31[22m[39m
    [90m156| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m157| [39m
    [90m158| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m159| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoContain[39m([32m'already processed'[39m)[33m;[39m
    [90m160| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/20]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/api/checkout-paypal-capture.test.ts[2m > [22mPOST /api/payments/paypal/capture[2m > [22mSafety Checks[2m > [22mshould return 400 for missing orderId
[31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 400[39m
[31m+ 500[39m

[36m [2mâ¯[22m tests/api/checkout-paypal-capture.test.ts:[2m169:31[22m[39m
    [90m167| [39m
    [90m168| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(req)[33m;[39m
    [90m169| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m170| [39m    })[33m;[39m
    [90m171| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/20]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/api/checkout-paypal-capture.test.ts[2m > [22mPOST /api/payments/paypal/capture[2m > [22mPayment Failures[2m > [22mshould handle declined payments gracefully
[31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 400[39m
[31m+ 500[39m

[36m [2mâ¯[22m tests/api/checkout-paypal-capture.test.ts:[2m188:31[22m[39m
    [90m186| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m187| [39m
    [90m188| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m189| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoContain[39m([32m'declined'[39m)[33m;[39m
    [90m190| [39m      

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/20]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/api/checkout-razorpay-create.test.ts[2m > [22mPOST /api/payments/razorpay/create[2m > [22mHappy Path[2m > [22mshould return 200 and order details for valid request
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2mâ¯[22m tests/api/checkout-razorpay-create.test.ts:[2m55:31[22m[39m
    [90m 53| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m
    [90m 54| [39m
    [90m 55| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m 56| [39m      [34mexpect[39m(data[33m.[39morderId)[33m.[39m[34mtoBe[39m([32m'rzp_test_123'[39m)[33m;[39m
    [90m 57| [39m      [34mexpect[39m(data[33m.[39mamount)[33m.[39m[34mtoBe[39m([34m29900[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/20]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/api/checkout-razorpay-create.test.ts[2m > [22mPOST /api/payments/razorpay/create[2m > [22mValidation Checks[2m > [22mshould return 400 for invalid amount
[31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 400[39m
[31m+ 500[39m

[36m [2mâ¯[22m tests/api/checkout-razorpay-create.test.ts:[2m78:31[22m[39m
    [90m 76| [39m
    [90m 77| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(req)[33m;[39m
    [90m 78| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m 79| [39m    })[33m;[39m
    [90m 80| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/20]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/api/checkout-razorpay-create.test.ts[2m > [22mPOST /api/payments/razorpay/create[2m > [22mValidation Checks[2m > [22mshould return 400 for unsupported currency
[31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 400[39m
[31m+ 500[39m

[36m [2mâ¯[22m tests/api/checkout-razorpay-create.test.ts:[2m92:31[22m[39m
    [90m 90| [39m
    [90m 91| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(req)[33m;[39m
    [90m 92| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m 93| [39m    })[33m;[39m
    [90m 94| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/20]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/api/checkout-razorpay-create.test.ts[2m > [22mPOST /api/payments/razorpay/create[2m > [22mValidation Checks[2m > [22mshould return 400 when resourceId is missing
[31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 400[39m
[31m+ 500[39m

[36m [2mâ¯[22m tests/api/checkout-razorpay-create.test.ts:[2m105:31[22m[39m
    [90m103| [39m
    [90m104| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(req)[33m;[39m
    [90m105| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m106| [39m    })[33m;[39m
    [90m107| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/20]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/api/checkout-razorpay-create.test.ts[2m > [22mPOST /api/payments/razorpay/create[2m > [22mResilience[2m > [22mshould handle Razorpay API errors with 500 status
[31m[1mAssertionError[22m: expected 'Internal server error.' to contain 'order creation failed'[39m

Expected: [32m"order creation failed"[39m
Received: [31m"Internal server error."[39m

[36m [2mâ¯[22m tests/api/checkout-razorpay-create.test.ts:[2m129:26[22m[39m
    [90m127| [39m
    [90m128| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m500[39m)[33m;[39m
    [90m129| [39m      [34mexpect[39m(data[33m.[39merror)[33m.[39m[34mtoContain[39m([32m'order creation failed'[39m)[33m;[39m
    [90m   | [39m                         [31m^[39m
    [90m130| [39m    })[33m;[39m
    [90m131| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/20]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/api/checkout-razorpay-verify.test.ts[2m > [22mPOST /api/payments/razorpay/webhook[2m > [22mHappy Path[2m > [22mshould verify valid signature and update database
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2mâ¯[22m tests/api/checkout-razorpay-verify.test.ts:[2m84:31[22m[39m
    [90m 82| [39m
    [90m 83| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(req)[33m;[39m
    [90m 84| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m200[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m 85| [39m
    [90m 86| [39m      [90m// Verify DB updates[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/20]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/api/checkout-razorpay-verify.test.ts[2m > [22mPOST /api/payments/razorpay/webhook[2m > [22mSecurity Checks[2m > [22mshould reject invalid HMAC signature
[31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 400[39m
[31m+ 500[39m

[36m [2mâ¯[22m tests/api/checkout-razorpay-verify.test.ts:[2m106:31[22m[39m
    [90m104| [39m
    [90m105| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(req)[33m;[39m
    [90m106| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m107| [39m      
    [90m108| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/20]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/api/checkout-razorpay-verify.test.ts[2m > [22mPOST /api/payments/razorpay/webhook[2m > [22mSecurity Checks[2m > [22mshould return 400 for missing signature header
[31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 400[39m
[31m+ 500[39m

[36m [2mâ¯[22m tests/api/checkout-razorpay-verify.test.ts:[2m119:31[22m[39m
    [90m117| [39m
    [90m118| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(req)[33m;[39m
    [90m119| [39m      [34mexpect[39m(response[33m.[39mstatus)[33m.[39m[34mtoBe[39m([34m400[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m120| [39m    })[33m;[39m
    [90m121| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/20]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/api/checkout-razorpay-verify.test.ts[2m > [22mPOST /api/payments/razorpay/webhook[2m > [22mReplay Prevention[2m > [22mshould ignore webhook if payment is already processed
[31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

[36m [2mâ¯[22m tests/api/checkout-razorpay-verify.test.ts:[2m144:31[22m[39m
    [90m142| [39m
    [90m143| [39m      [35mconst[39m response [33m=[39m [35mawait[39m [33mPOST[39m(req)[33m;[39m
    [90m144| [39m      expect(response.status).toBe(200); // Usually webhooks return 20â€¦
    [90m   | [39m                              [31m^[39m
    [90m145| [39m
    [90m146| [39m      [35mconst[39m data [33m=[39m [35mawait[39m response[33m.[39m[34mjson[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/20]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/components/SubmitForm.test.tsx[2m > [22mSubmitForm Component[2m > [22mForm Validation[2m > [22mshows validation error when submitting without required fields
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an element with the text: /Please provide at least a Title and Description/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"max-w-6xl mx-auto px-4 py-12 animate-in fade-in duration-1000"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center mb-16"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 mb-6"[39m
        [36m>[39m
          [36m<span[39m
            [33mclass[39m=[32m"relative flex h-2 w-2"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"[39m
            [36m/>[39m
            [36m<span[39m
              [33mclass[39m=[32m"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"[39m
            [36m/>[39m
          [36m</span>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-xs font-black text-emerald-500 uppercase tracking-widest leading-none"[39m
          [36m>[39m
            [0mLaunch Pricing - Early Adopter Rate[0m
          [36m</span>[39m
        [36m</div>[39m
        [36m<h1[39m
          [33mclass[39m=[32m"text-4xl md:text-5xl font-black text-white tracking-tighter mb-4"[39m
        [36m>[39m
          [0mSubmit Your Tool to [0m
          [36m<span[39m
            [33mclass[39m=[32m"text-emerald-500"[39m
          [36m>[39m
            [0mAntigravity[0m
          [36m</span>[39m
        [36m</h1>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-500 max-w-2xl mx-auto text-lg"[39m
        [36m>[39m
          [0mJoin the most authoritative hub for agentic development. Reach high-intent users and secure your permanent SEO footprint.[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-8 max-w-3xl mx-auto mb-16"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-[#050505] border border-white/5 rounded-3xl p-8 space-y-10 border-l-emerald-500/20 border-l-2"[39m
        [36m>[39m
          [36m<h3[39m
            [33mclass[39m=[32m"text-sm font-black text-gray-500 uppercase tracking-widest border-b border-white/5 pb-4"[39m
          [36m>[39m
            [0mWhy Top Tools Launch Here[0m
          [36m</h3>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex gap-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"w-10 h-10 rounded-xl bg-emerald-500/10 flex items-center justify-center shrink-0"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-earth w-5 h-5 text-emerald-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M21.54 15H17a2 2 0 0 0-2 2v4.54"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"12"[39m
                    [33mcy[39m=[32m"12"[39m
                    [33mr[39m=[32m"10"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<h4[39m
                  [33mclass[39m=[32m"text-base font-black text-white uppercase tracking-wider mb-2"[39m
                [36m>[39m
                  [0mMassive Exposure[0m
                [36m</h4>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-sm text-gray-500 leading-relaxed font-medium"[39m
                [36m>[39m
                  [0mReach 2M+ active AI seekers every month looking for tools like yours.[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex gap-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center shrink-0"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-search w-5 h-5 text-blue-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m21 21-4.34-4.34"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"11"[39m
                    [33mcy[39m=[32m"11"[39m
                    [33mr[39m=[32m"8"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<h4[39m
                  [33mclass[39m=[32m"text-base font-black text-white uppercase tracking-wider mb-2"[39m
                [36m>[39m
                  [0mSEO Benchmark (Do-Follow)[0m
                [36m</h4>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-sm text-gray-500 leading-relaxed font-medium"[39m
                [36m>[39m
                  [0mBoost your domain authority with a high-quality, permanent do-follow backlink.[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex...

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"max-w-6xl mx-auto px-4 py-12 animate-in fade-in duration-1000"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center mb-16"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 mb-6"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"relative flex h-2 w-2"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"[39m
              [36m/>[39m
              [36m<span[39m
                [33mclass[39m=[32m"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"[39m
              [36m/>[39m
            [36m</span>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs font-black text-emerald-500 uppercase tracking-widest leading-none"[39m
            [36m>[39m
              [0mLaunch Pricing - Early Adopter Rate[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-4xl md:text-5xl font-black text-white tracking-tighter mb-4"[39m
          [36m>[39m
            [0mSubmit Your Tool to [0m
            [36m<span[39m
              [33mclass[39m=[32m"text-emerald-500"[39m
            [36m>[39m
              [0mAntigravity[0m
            [36m</span>[39m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-500 max-w-2xl mx-auto text-lg"[39m
          [36m>[39m
            [0mJoin the most authoritative hub for agentic development. Reach high-intent users and secure your permanent SEO footprint.[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"space-y-8 max-w-3xl mx-auto mb-16"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-[#050505] border border-white/5 rounded-3xl p-8 space-y-10 border-l-emerald-500/20 border-l-2"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-sm font-black text-gray-500 uppercase tracking-widest border-b border-white/5 pb-4"[39m
            [36m>[39m
              [0mWhy Top Tools Launch Here[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex gap-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"w-10 h-10 rounded-xl bg-emerald-500/10 flex items-center justify-center shrink-0"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-earth w-5 h-5 text-emerald-500"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M21.54 15H17a2 2 0 0 0-2 2v4.54"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"10"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                [36m</div>[39m
                [36m<div>[39m
                  [36m<h4[39m
                    [33mclass[39m=[32m"text-base font-black text-white uppercase tracking-wider mb-2"[39m
                  [36m>[39m
                    [0mMassive Exposure[0m
                  [36m</h4>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-gray-500 leading-relaxed font-medium"[39m
                  [36m>[39m
                    [0mReach 2M+ active AI seekers every month looking for tools like yours.[0m
                  [36m</p>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex gap-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center shrink-0"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-search w-5 h-5 text-blue-500"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"m21 21-4.34-4.34"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"11"[39m
                      [33mcy[39m=[32m"11"[39m
                      [33mr[39m=[32m"8"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                [36m</div>[39m
                [36m<div>[39m
                  [36m<h4[39m
                    [33mclass[39m=[32m"text-base font-black text-white uppercase tracking-wider mb-2"[39m
                  [36m>[39m
                    [0mSEO Benchmark (Do-Follow)[0m
                  [36m</h4>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-gray-500 lea...
[90m [2mâ¯[22m Proxy.waitForWrapper node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[36m [2mâ¯[22m tests/integration/components/SubmitForm.test.tsx:[2m42:13[22m[39m
    [90m 40| [39m      [35mawait[39m user[33m.[39m[34mclick[39m(submitButton)[33m;[39m
    [90m 41| [39m
    [90m 42| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m   | [39m            [31m^[39m
    [90m 43| [39m        expect(screen.getByText(/Please provide at least a Title and Dâ€¦
    [90m 44| [39m      })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/20]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/components/tools/__tests__/ToolsShell.test.tsx[2m > [22mToolsShell Component[2m > [22mrenders children correctly
[41m[1m FAIL [22m[49m src/components/tools/__tests__/ToolsShell.test.tsx[2m > [22mToolsShell Component[2m > [22mrenders sidebar by default on desktop
[41m[1m FAIL [22m[49m src/components/tools/__tests__/ToolsShell.test.tsx[2m > [22mToolsShell Component[2m > [22mtoggles sidebar when toggle button is clicked
[41m[1m FAIL [22m[49m src/components/tools/__tests__/ToolsShell.test.tsx[2m > [22mToolsShell Component[2m > [22mautomatically closes sidebar on mobile
[31m[1mReferenceError[22m: window is not defined[39m
[36m [2mâ¯[22m src/components/tools/__tests__/ToolsShell.test.tsx:[2m27:27[22m[39m
    [90m 25| [39m  [34mbeforeEach[39m(() [33m=>[39m {
    [90m 26| [39m    [90m// Reset window width to desktop default[39m
    [90m 27| [39m    Object.defineProperty(window, 'innerWidth', { writable: true, confâ€¦
    [90m   | [39m                          [31m^[39m
    [90m 28| [39m    window[33m.[39m[34mdispatchEvent[39m([35mnew[39m [33mEvent[39m([32m'resize'[39m))[33m;[39m
    [90m 29| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/20]âŽ¯[22m[39m


[2m Test Files [22m [1m[31m6 failed[39m[22m[2m | [22m[1m[32m10 passed[39m[22m[90m (16)[39m
[2m      Tests [22m [1m[31m19 failed[39m[22m[2m | [22m[1m[32m84 passed[39m[22m[90m (103)[39m
[2m   Start at [22m 00:15:36
[2m   Duration [22m 23.67s[2m (transform 1.37s, setup 23.91s, import 19.86s, tests 7.64s, environment 5.99s)[22m

â€‰ELIFECYCLEâ€‰ Test failed. See above for more details.
